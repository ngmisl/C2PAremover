<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C2PAremover</title>
    <meta name="description" content="A command-line tool to detect and remove Content Authenticity Initiative (CAI) metadata, also known as C2PA (Coalition for Content Provenance and Authenticity) metadata, from image files.">
    <link rel="stylesheet" href="styles.css">
    <meta property="og:title" content="C2PAremover">
    <meta property="og:description" content="A command-line tool to detect and remove Content Authenticity Initiative (CAI) metadata, also known as C2PA (Coalition for Content Provenance and Authenticity) metadata, from image files.">
    <meta property="og:image" content="https://ngmisl.github.io/C2PAremover/og-image.png">
    <meta property="og:url" content="https://ngmisl.github.io/C2PAremover">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://ngmisl.github.io/C2PAremover/og-image.png">
    <meta property="fc:frame" content='{"version":"next","imageUrl":"https://ngmisl.github.io/C2PAremover/og-image.png","button":{"title":"Open repository","action":{"type":"launch_frame","url":"https://ngmisl.github.io/C2PAremover","name":"C2PAremover","splashImageUrl":"https://ngmisl.github.io/C2PAremover/splash-image.png","splashBackgroundColor":"#f5f0ec"}}}' />
    <script type="module">
        import { sdk } from 'https://esm.sh/@farcaster/frame-sdk'
        
        // Call ready when the page is loaded
        async function rewriteLinks() {
            const links = document.querySelectorAll("a[href^='http']");
            for (let link of links) {
                link.addEventListener("click", (event) => {
                    event.preventDefault();
                    sdk.actions.openUrl(link.getAttribute("href"));
                });
            }
        }
        window.addEventListener('load', async () => {
            try {
                await sdk.actions.ready();
                console.log('Frame is ready');
                const ctx = await sdk.context;
                ctx ? await rewriteLinks() : null;
            } catch (e) {
                console.error('Failed to initialize frame:', e);
            }
        });
    </script>
</head>
<body>
    <div class="container">
        <div class="content">
            <p><a href="https://github.com/ngmisl/C2PAremover/actions/workflows/go.yml"><img src="https://github.com/ngmisl/C2PAremover/actions/workflows/go.yml/badge.svg" alt="Go"></a> <a href="https://github.com/ngmisl/C2PAremover/actions/workflows/github-code-scanning/codeql"><img src="https://github.com/ngmisl/C2PAremover/actions/workflows/github-code-scanning/codeql/badge.svg" alt="CodeQL"></a> <a href="https://github.com/ngmisl/C2PAremover/actions/workflows/gh-frame.yml"><img src="https://github.com/ngmisl/C2PAremover/actions/workflows/gh-frame.yml/badge.svg" alt="Build Farcaster Page"></a></p>
<h1>C2PA Metadata Remover</h1>
<p>A lightweight tool for detecting and removing Content Authenticity Initiative (C2PA) metadata from image files. Available as both a CLI tool and a WebAssembly module.</p>
<h2>What is C2PA?</h2>
<p>C2PA (Coalition for Content Provenance and Authenticity) is a metadata standard used to track the origin and edit history of media content. While it serves legitimate purposes in combating misinformation and deepfakes, it also raises privacy concerns as it can contain identifiable information about the device that created an image and its user.</p>
<h2>Features</h2>
<ul>
<li>Detects presence of C2PA metadata in JPEG and PNG files</li>
<li>Cleanly removes C2PA metadata while preserving image quality</li>
<li>Available in two formats:<ul>
<li>Native Go CLI tool</li>
<li>WebAssembly module (via Wasmer)</li>
</ul>
</li>
<li>Doesn&#39;t require external dependencies</li>
</ul>
<h2>Installation</h2>
<h3>CLI Tool</h3>
<h4>From Source</h4>
<pre><code class="language-bash"># Requires Go 1.24.1 or later
git clone https://github.com/ngmisl/C2PAremover.git
cd C2PAremover
go build -o c2paremover .
</code></pre>
<h3>WebAssembly Module</h3>
<pre><code class="language-bash"># Install using Wasmer
wasmer install metaend/c2paremover

# Or run directly from Wasmer.io registry
wasmer run metaend/c2paremover@0.1.5
</code></pre>
<h2>Usage</h2>
<h3>CLI Tool</h3>
<pre><code class="language-bash"># Check and remove C2PA metadata from a single file
c2paremover input.jpg output.jpg

# Process multiple files
c2paremover input1.jpg output1.jpg input2.png output2.png

# Check directory (creates cleaned copies with &quot;_clean&quot; suffix)
c2paremover -d /path/to/directory
</code></pre>
<h3>WebAssembly Module</h3>
<p>The WASM module reads from stdin and writes to stdout:</p>
<pre><code class="language-bash"># Process a single file
cat input.jpg | wasmer run c2paremover &gt; cleaned.jpg

# Process Adobe test file with C2PA metadata
cat adobe-20220124-CAICA.jpg | wasmer run metaend/c2paremover &gt; cleaned.jpg

# Process and chain with other tools
cat input.jpg | wasmer run c2paremover | convert - -resize 800x600 output.jpg
</code></pre>
<h4>Why Wasmer?</h4>
<p>The WebAssembly version offers several advantages:</p>
<ul>
<li><strong>Cross-platform compatibility</strong>: Run the same binary on any OS (Windows, macOS, Linux)</li>
<li><strong>No installation required</strong>: Just use the Wasmer CLI to run directly from the registry</li>
<li><strong>Sandboxed execution</strong>: Enhanced security through WebAssembly&#39;s isolation</li>
<li><strong>Fast performance</strong>: Near-native execution speed</li>
<li><strong>Easy distribution</strong>: Share a single link that works everywhere</li>
<li><strong>Seamless pipelines</strong>: Perfect for integration with other command-line tools</li>
</ul>
<h2>Build Options</h2>
<h3>Standard CLI Build</h3>
<pre><code class="language-bash">go build .
</code></pre>
<h3>WebAssembly Build</h3>
<pre><code class="language-bash">GOOS=wasip1 GOARCH=wasm go build -o c2paremover.wasm -tags=wasmer .
</code></pre>
<h2>How It Works</h2>
<p>The tool performs the following operations:</p>
<ol>
<li>Detects the image format (JPEG or PNG)</li>
<li>Parses the file structure to identify C2PA metadata<ul>
<li>For JPEG: Checks for APP11 (0xEB) segments and APP1 (XMP) containing C2PA namespaces</li>
<li>For PNG: Checks for caBX chunks and textual metadata containing C2PA references</li>
</ul>
</li>
<li>When removing metadata:<ul>
<li>Creates a clean version by re-encoding the decoded image</li>
<li>For JPEGs, uses a fallback approach that selectively copies segments, skipping C2PA-related ones</li>
</ul>
</li>
</ol>
<h2>License</h2>
<p><a href="LICENSE">MIT License</a></p>
<h2>Contributing</h2>
<p>Contributions are welcome! Please feel free to submit a Pull Request.</p>

        </div>
        <div class="footer">
            <a href="https://github.com/ngmisl/C2PAremover" class="github-button">View on Github</a>
        </div>
    </div>
</body>
</html> 